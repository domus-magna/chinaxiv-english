{% extends "base.html" %}
{% block header_breadcrumbs %}
  <div class="header-breadcrumbs">
    <a href="{{ root }}/">Home</a> <span class="sep">&gt;</span> Recent
  </div>
{% endblock %}
{% block content %}
  <div class="page-header">
    <h1>Recent Translations from ChinaXiv</h1>
    <p class="page-description">
      Automatically translated preprints from the Chinese arXiv (ChinaXiv).
      All translations are machine-generated—please verify with the original source.
    </p>
  </div>

  <div class="search-block">
    <div class="search-input-group">
      <input id="search-input" placeholder="Search by title, authors, or abstract…" />
      <button class="search-btn">Search</button>
    </div>
    <div class="search-filters">
      <div class="filter-group">
        <label for="category-filter">Category:</label>
        <select id="category-filter">
          <option value="">All Categories</option>
          <option value="cs">Computer Science</option>
          <option value="math">Mathematics</option>
          <option value="physics">Physics</option>
          <option value="biology">Biology</option>
          <option value="chemistry">Chemistry</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="date-filter">Date:</label>
        <select id="date-filter">
          <option value="">All Dates</option>
          <option value="today">Today</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="year">This Year</option>
        </select>
      </div>
    </div>
    <div id="search-results"></div>
  </div>

  <dl id="articles">
    {% for it in items %}
      <dt>
        <span class='descriptor'>Title:</span>
        <a href="{{ root }}/items/{{ it.id }}/" title="Abstract" id="{{ it.id }}" class="mathjax list-title-link">{{ it.title_en or it.title }}</a>
        [<a href="{{ root }}/items/{{ it.id }}/" title="HTML">html</a>{% if it.pdf_url %}, <a href="{{ it.pdf_url }}" title="Download PDF">pdf</a>{% endif %}]
      </dt>
      <dd>
        <div class='list-authors'><span class='descriptor'>Authors:</span> {{ ', '.join(it.creators_en or it.creators or ['Unknown']) }}</div>
        {% if it.subjects or it.subjects_en %}
        <div class='list-subjects'><span class='descriptor'>Subjects:</span> <span class="primary-subject">{{ (it.subjects_en or it.subjects)[0] }}</span>{% for s in (it.subjects_en or it.subjects)[1:2] %}; {{ s }}{% endfor %}</div>
        {% endif %}
        <div class='list-id'><span class='descriptor'>ChinaXiv Id:</span> <a href="{{ it.source_url or ('https://chinaxiv.org/abs/' ~ (it.id | replace('chinaxiv-',''))) }}" target="_blank" rel="noopener">{{ it.id }}</a></div>
        {% if it.date %}
        <div class='dateline'>Submitted: {{ it.date }}</div>
        {% endif %}
        <p class='mathjax'>{{ it.abstract_en[:500] }}{% if it.abstract_en and it.abstract_en|length > 500 %}…{% endif %}</p>
      </dd>
    {% endfor %}
  </dl>

  {% if not items %}
    <p style="color: #777; font-style: italic; margin-top: 40px;">No translations available yet.</p>
  {% endif %}

  <div class="support-section">
    <h2>Support ChinaXiv Translations</h2>
    <p>Help us continue translating Chinese academic papers to English. Your support covers API costs, server expenses, and ongoing development.</p>
    <a href="{{ root }}/donation.html" class="donation-btn">Please support us by donating here</a>
  </div>
{% endblock %}
